<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>OiiinkTube</title>
<style>
  body {
    margin: 0; font-family: Arial, sans-serif; background: #f9f9f9; color: #222;
  }
  header {
    background: white; padding: 10px 20px; box-shadow: 0 2px 4px rgb(0 0 0 / 0.1);
    display: flex; align-items: center; justify-content: space-between;
    position: sticky; top: 0; z-index: 10;
  }
  header h1 {
    margin: 0; font-weight: bold; color: #cc181e;
  }
  #searchForm {
    flex-grow: 1; max-width: 600px; margin-left: 20px;
  }
  #searchForm input[type="text"] {
    width: 100%; padding: 8px 12px; border: 1px solid #ccc; border-radius: 2px;
    font-size: 16px;
  }
  main {
    padding: 20px; max-width: 1100px; margin: auto;
  }
  .videos {
    display: grid;
    grid-template-columns: repeat(auto-fill,minmax(260px,1fr));
    gap: 16px;
  }
  .video-card {
    background: white; border-radius: 6px; box-shadow: 0 1px 4px rgb(0 0 0 / 0.1);
    cursor: pointer; overflow: hidden; display: flex; flex-direction: column;
  }
  .thumbnail {
    width: 100%; aspect-ratio: 16 / 9; object-fit: cover;
    background: #ddd;
  }
  .video-info {
    padding: 10px 12px; flex-grow: 1;
  }
  .video-title {
    font-weight: bold; font-size: 15px; margin: 0 0 6px 0;
    line-height: 1.2; color: #111;
  }
  .video-channel {
    font-size: 13px; color: #555;
    margin-bottom: 4px;
  }
  .video-views {
    font-size: 12px; color: #777;
  }
  /* Video player overlay */
  #playerOverlay {
    position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
    background: rgba(0,0,0,0.85); display: none; flex-direction: column;
    align-items: center; justify-content: flex-start; padding-top: 40px;
    z-index: 20;
  }
  #playerContainer {
    background: #000; width: 80vw; max-width: 960px; aspect-ratio: 16 / 9;
    position: relative; border-radius: 8px; overflow: hidden;
  }
  #closeBtn {
    position: absolute; top: 8px; right: 8px; background: rgba(255,255,255,0.8);
    border: none; border-radius: 50%; width: 32px; height: 32px; cursor: pointer;
    font-weight: bold; font-size: 20px; line-height: 28px; text-align: center;
    color: #333;
  }
  iframe {
    width: 100%; height: 100%; border: none;
  }
  /* Comments section */
  #commentsSection {
    margin-top: 15px;
    width: 80vw; max-width: 960px;
    background: white; border-radius: 8px; padding: 15px;
    max-height: 300px; overflow-y: auto;
    box-shadow: 0 2px 6px rgb(0 0 0 / 0.2);
  }
  #commentsSection h3 {
    margin-top: 0;
  }
  .comment {
    display: flex; margin-bottom: 12px; gap: 10px;
  }
  .avatar {
    width: 40px; height: 40px; border-radius: 50%; background: #ccc;
    flex-shrink: 0;
  }
  .comment-content {
    flex-grow: 1;
  }
  .comment-user {
    font-weight: bold; font-size: 14px; margin: 0 0 4px 0;
  }
  .comment-text {
    margin: 0; font-size: 14px; white-space: pre-wrap;
  }
  #commentForm {
    display: flex; gap: 10px; margin-top: 10px;
  }
  #commentForm select, #commentForm textarea {
    font-size: 14px;
    border-radius: 4px;
    border: 1px solid #ccc;
    padding: 6px 8px;
  }
  #commentForm select {
    width: 120px;
  }
  #commentForm textarea {
    flex-grow: 1;
    resize: vertical;
    height: 50px;
  }
  #commentForm button {
    background: #cc181e;
    color: white;
    border: none;
    border-radius: 4px;
    padding: 8px 15px;
    cursor: pointer;
    font-weight: bold;
  }
  #commentForm button:disabled {
    background: #999;
    cursor: not-allowed;
  }
</style>
</head>
<body>
  <header>
    <h1>OiiinkTube</h1>
    <form id="searchForm" onsubmit="event.preventDefault(); searchVideos();">
      <input type="text" id="searchInput" placeholder="Search videos..." />
    </form>
  </header>

  <main>
    <div class="videos" id="videoList"></div>
  </main>

  <div id="playerOverlay" onclick="closePlayer(event)">
    <div id="playerContainer" onclick="event.stopPropagation()">
      <button id="closeBtn" onclick="closePlayer(event)">Ã—</button>
      <iframe id="videoPlayer" src="" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
      <div id="commentsSection">
        <h3>Comments</h3>
        <div id="commentsList"></div>
        <form id="commentForm" onsubmit="submitComment(event)">
          <select id="userSelect"></select>
          <textarea id="commentInput" placeholder="Add a comment..." required></textarea>
          <button type="submit" disabled>Post</button>
        </form>
      </div>
    </div>
  </div>

<script>
  // Users (profiles)
  const users = [
    { id: 1, name: "Oiiink", avatar: "https://i.pravatar.cc/40?u=oiiink" },
    { id: 2, name: "Friend1", avatar: "https://i.pravatar.cc/40?u=friend1" },
    { id: 3, name: "Friend2", avatar: "https://i.pravatar.cc/40?u=friend2" },
  ];

  // Your real recent videos from Oiiink's YouTube channel (IDs found publicly)
  const videos = [
    {
      id: "xVrGUThxsXQ",
      title: "I Won A 100K Game In Minecraft (Hypixel Skyblock)",
      channel: "Oiiink",
      views: "1.4M views",
      thumbnail: "https://img.youtube.com/vi/xVrGUThxsXQ/hqdefault.jpg",
      comments: [
        { userId: 2, text: "Insane gameplay!" },
        { userId: 3, text: "Wow, amazing!" },
      ],
    },
    {
      id: "Q1-rQ_vTDfw",
      title: "100K Coins To Spend In Hypixel Skyblock!",
      channel: "Oiiink",
      views: "870K views",
      thumbnail: "https://img.youtube.com/vi/Q1-rQ_vTDfw/hqdefault.jpg",
      comments: [
        { userId: 1, text: "That was a lot of fun!" },
      ],
    },
    {
      id: "Y6s13R1G2Ug",
      title: "How To Get Rich Fast In Skyblock 2025",
      channel: "Oiiink",
      views: "600K views",
      thumbnail: "https://img.youtube.com/vi/Y6s13R1G2Ug/hqdefault.jpg",
      comments: [],
    },
    {
      id: "8x1YO8aT0Ow",
      title: "My Craziest Skyblock Moments",
      channel: "Oiiink",
      views: "450K views",
      thumbnail: "https://img.youtube.com/vi/8x1YO8aT0Ow/hqdefault.jpg",
      comments: [
        { userId: 3, text: "Epic moments, keep it up!" },
      ],
    },
    {
      id: "vK9YolQ_Vjc",
      title: "Building The Best Skyblock Base",
      channel: "Oiiink",
      views: "380K views",
      thumbnail: "https://img.youtube.com/vi/vK9YolQ_Vjc/hqdefault.jpg",
      comments: [],
    },
  ];

  const videoList = document.getElementById("videoList");
  const playerOverlay = document.getElementById("playerOverlay");
  const videoPlayer = document.getElementById("videoPlayer");
  const commentsList = document.getElementById("commentsList");
  const commentForm = document.getElementById("commentForm");
  const userSelect = document.getElementById("userSelect");
  const commentInput = document.getElementById("commentInput");
  const postBtn = commentForm.querySelector("button");

  let currentVideo = null;

  // Render user options in comment form
  function renderUserOptions() {
    userSelect.innerHTML = "";
    for (const user of users) {
      const opt = document.createElement("option");
      opt.value = user.id;
      opt.textContent = user.name;
      userSelect.appendChild(opt);
    }
  }

  // Render videos on homepage
  function renderVideos(list) {
    videoList.innerHTML = "";
    for (const video of list) {
      const card = document.createElement("div");
      card.className = "video-card";
      card.onclick = () => playVideo(video.id);

      const thumb = document.createElement("img");
      thumb.className = "thumbnail";
      thumb.src = video.thumbnail;
      thumb.alt = video.title;

      const info = document.createElement("div");
      info.className = "video-info";

      const title = document.createElement("h3");
      title.className = "video-title";
      title.textContent = video.title;

      const channel = document.createElement("div");
      channel.className = "video-channel";
      channel.textContent = video.channel;

      const views = document.createElement("div");
      views.className = "video-views";
      views.textContent = video.views;

      info.appendChild(title);
      info.appendChild(channel);
      info.appendChild(views);

      card.appendChild(thumb);
      card.appendChild(info);
      videoList.appendChild(card);
    }
  }

  // Play video and show overlay
  function playVideo(id) {
    currentVideo = videos.find(v => v.id === id);
    videoPlayer.src = `https://www.youtube.com/embed/${id}?autoplay=1`;
    playerOverlay.style.display = "flex";
    renderComments();
  }

  // Close player overlay
  function closePlayer(e) {
    e.stopPropagation();
    videoPlayer.src = "";
    playerOverlay.style.display = "none";
    currentVideo = null;
    commentsList.innerHTML = "";
    commentInput.value = "";
    postBtn.disabled = true;
  }

  // Render comments for current video
  function renderComments() {
    if (!currentVideo) return;
    commentsList.innerHTML = "";
    if (currentVideo.comments.length === 0) {
      commentsList.textContent = "No comments yet. Be the first!";
      return;
    }
    for (const comment of currentVideo.comments) {
      const user = users.find(u => u.id === comment.userId);
      const c = document.createElement("div");
      c.className = "comment";

      const avatar = document.createElement("img");
      avatar.className = "avatar";
      avatar.src = `https://i.pravatar.cc/40?u=${user.id}`;
      avatar.alt = user.name;

      const content = document.createElement("div");
      content.className = "comment-content";

      const username = document.createElement("p");
      username.className = "comment-user";
      username.textContent = user.name;

      const text = document.createElement("p");
      text.className = "comment-text";
      text.textContent = comment.text;

      content.appendChild(username);
      content.appendChild(text);
      c.appendChild(avatar);
      c.appendChild(content);
      commentsList.appendChild(c);
    }
  }

  // Submit new comment
  function submitComment(e) {
    e.preventDefault();
    if (!currentVideo) return;
    const userId = parseInt(userSelect.value);
    const text = commentInput.value.trim();
    if (!text) return;
    currentVideo.comments.push({ userId, text });
    commentInput.value = "";
    postBtn.disabled = true;
    renderComments();
  }

  // Enable/disable post button based on input
  commentInput.addEventListener("input", () => {
    postBtn.disabled = commentInput.value.trim() === "";
  });

  // Search videos
  function searchVideos() {
    const query = document.getElementById("searchInput").value.toLowerCase();
    if (!query) {
      renderVideos(videos);
      return;
    }
    const filtered = videos.filter(v =>
      v.title.toLowerCase().includes(query) ||
      v.channel.toLowerCase().includes(query)
    );
    renderVideos(filtered);
  }

  renderUserOptions();
  renderVideos(videos);
</script>
</body>
</html>
