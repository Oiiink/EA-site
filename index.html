<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Mini Agar.io</title>
<style>
  html, body {
    margin: 0; padding: 0; overflow: hidden;
    background: #222;
    height: 100vh;
    font-family: Arial, sans-serif;
    user-select: none;
  }
  #gameCanvas {
    display: block;
    background: #1e1e1e;
    margin: 0 auto;
    cursor: crosshair;
    border: 2px solid #eee;
  }
  #scoreBoard {
    position: absolute;
    top: 10px; left: 50%;
    transform: translateX(-50%);
    color: #ffd600;
    font-size: 24px;
    font-weight: bold;
    text-shadow: 0 0 10px #ffd600aa;
    user-select: none;
  }
</style>
</head>
<body>

<div id="scoreBoard">Score: 0</div>
<canvas id="gameCanvas"></canvas>

<script>
  const canvas = document.getElementById('gameCanvas');
  const ctx = canvas.getContext('2d');
  let width, height;

  function resize() {
    width = window.innerWidth;
    height = window.innerHeight;
    canvas.width = width;
    canvas.height = height;
  }
  window.addEventListener('resize', resize);
  resize();

  // Player properties
  const player = {
    x: width / 2,
    y: height / 2,
    radius: 20,
    color: '#ffd600',
    speed: 3,
    vx: 0,
    vy: 0,
  };

  // Mouse position tracking
  const mouse = { x: player.x, y: player.y };

  canvas.addEventListener('mousemove', (e) => {
    mouse.x = e.clientX;
    mouse.y = e.clientY;
  });

  // Food properties
  const foodCount = 150;
  const food = [];

  function randomColor() {
    const colors = ['#ff4444', '#44ff44', '#4444ff', '#ffbb33', '#33ffbb', '#bb33ff'];
    return colors[Math.floor(Math.random() * colors.length)];
  }

  function createFood() {
    for (let i = 0; i < foodCount; i++) {
      food.push({
        x: Math.random() * width,
        y: Math.random() * height,
        radius: 5 + Math.random() * 5,
        color: randomColor(),
      });
    }
  }

  createFood();

  // Game loop
  function gameLoop() {
    // Clear canvas
    ctx.clearRect(0, 0, width, height);

    // Move player towards mouse with smooth easing
    const dx = mouse.x - player.x;
    const dy = mouse.y - player.y;
    const dist = Math.sqrt(dx * dx + dy * dy);

    if (dist > 1) {
      const moveX = (dx / dist) * player.speed;
      const moveY = (dy / dist) * player.speed;
      player.x += moveX;
      player.y += moveY;
    }

    // Draw and check collision with food
    for (let i = food.length - 1; i >= 0; i--) {
      const f = food[i];
      // Draw food
      ctx.beginPath();
      ctx.fillStyle = f.color;
      ctx.shadowColor = f.color;
      ctx.shadowBlur = 8;
      ctx.arc(f.x, f.y, f.radius, 0, Math.PI * 2);
      ctx.fill();
      ctx.shadowBlur = 0;

      // Check collision with player
      const distToPlayer = Math.hypot(f.x - player.x, f.y - player.y);
      if (distToPlayer < player.radius + f.radius) {
        // Eat food, grow player
        player.radius += f.radius * 0.2;
        food.splice(i, 1);
        spawnFood();
      }
    }

    // Draw player
    ctx.beginPath();
    ctx.fillStyle = player.color;
    ctx.shadowColor = player.color;
    ctx.shadowBlur = 20;
    ctx.arc(player.x, player.y, player.radius, 0, Math.PI * 2);
    ctx.fill();
    ctx.shadowBlur = 0;

    // Clamp player to canvas bounds
    player.x = Math.min(Math.max(player.radius, player.x), width - player.radius);
    player.y = Math.min(Math.max(player.radius, player.y), height - player.radius);

    // Update score display
    const scoreBoard = document.getElementById('scoreBoard');
    scoreBoard.textContent = `Score: ${Math.floor(player.radius * player.radius)}`;

    requestAnimationFrame(gameLoop);
  }

  // Spawn one new food
  function spawnFood() {
    food.push({
      x: Math.random() * width,
      y: Math.random() * height,
      radius: 5 + Math.random() * 5,
      color: randomColor(),
    });
  }

  gameLoop();
</script>

</body>
</html>
