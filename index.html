<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Hit Me! - Bus Game</title>
  <style>
    body {
      margin: 0;
      background: #88ccee;
      font-family: Arial, sans-serif;
      overflow: hidden;
    }
    canvas {
      background: #eee;
      display: block;
      margin: 0 auto;
    }
    #score {
      position: absolute;
      top: 10px;
      left: 10px;
      font-size: 24px;
      background: rgba(0,0,0,0.5);
      color: white;
      padding: 10px;
      border-radius: 8px;
    }
  </style>
</head>
<body>
<canvas id="gameCanvas" width="800" height="400"></canvas>
<div id="score">Score: 0</div>
<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

let player = {
  x: 100,
  y: 300,
  width: 40,
  height: 60,
  color: 'blue',
  vy: 0,
  grounded: true,
  score: 0
};

let bus = {
  x: canvas.width,
  y: 300,
  width: 120,
  height: 60,
  speed: 5,
  color: 'red'
};

let gravity = 1;
let hit = false;
let keys = {};

document.addEventListener('keydown', e => keys[e.code] = true);
document.addEventListener('keyup', e => keys[e.code] = false);

function resetBus() {
  bus.x = canvas.width + Math.random() * 500;
  bus.speed = 5 + Math.random() * 5;
}

function update() {
  // Movement
  if (keys['ArrowLeft']) player.x -= 5;
  if (keys['ArrowRight']) player.x += 5;

  // Gravity
  if (!player.grounded) {
    player.vy += gravity;
    player.y += player.vy;
  }

  // Ground collision
  if (player.y >= 300) {
    player.y = 300;
    player.vy = 0;
    player.grounded = true;
  }

  // Bus movement
  bus.x -= bus.speed;

  // Collision detection
  if (!hit && player.x < bus.x + bus.width && player.x + player.width > bus.x &&
      player.y < bus.y + bus.height && player.y + player.height > bus.y) {
    hit = true;
    const impact = Math.floor(bus.speed * 100);
    player.score += impact;
    document.getElementById('score').innerText = `Score: ${player.score}`;
    player.vy = -15;
    player.grounded = false;
    setTimeout(() => {
      resetBus();
      hit = false;
    }, 1000);
  }

  // Reset bus
  if (bus.x + bus.width < 0) {
    resetBus();
  }
}

function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // Road
  ctx.fillStyle = '#666';
  ctx.fillRect(0, 360, canvas.width, 40);

  // Player
  ctx.fillStyle = player.color;
  ctx.fillRect(player.x, player.y, player.width, player.height);

  // Bus
  ctx.fillStyle = bus.color;
  ctx.fillRect(bus.x, bus.y, bus.width, bus.height);

  // Text: "Get Hit By the Bus!"
  ctx.fillStyle = 'black';
  ctx.font = '20px Arial';
  ctx.fillText('Get hit by the bus for points!', 250, 30);
}

function gameLoop() {
  update();
  draw();
  requestAnimationFrame(gameLoop);
}

resetBus();
gameLoop();
</script>
</body>
